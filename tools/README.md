# 工具目录

这个目录包含用于开发、调试和维护 MotuCalliLib 项目的各种工具脚本。

## 可用工具

### check_db.py - 数据库检查工具

用于检查书法数据库的结构、数据完整性和统计信息。

**使用方法：**
```bash
# 显示所有信息（默认）
python tools/check_db.py

# 只显示统计信息
python tools/check_db.py --stats

# 只显示表结构
python tools/check_db.py --tables

# 只显示示例数据
python tools/check_db.py --samples

# 指定数据库文件
python tools/check_db.py --db /path/to/database.db
```

**功能特性：**
- 显示数据库文件信息和大小
- 列出所有表的结构和字段信息
- 统计各表的记录数量
- 检查数据完整性（外键约束等）
- 显示示例数据
- 支持命令行参数控制输出内容

**输出示例：**
```
数据库统计信息
============================================================
数据库文件: data/shufadb.db
文件大小: 15,234,567 字节 (14.53 MB)
检查时间: 2024-01-15 10:30:45

各表记录统计:
  authors        :      1,234 条记录
  books          :        567 条记录
  fonts          :         89 条记录
  glyphs         :     45,678 条记录
  images         :     45,678 条记录
  ------------------------------
  总计           :     93,246 条记录

数据完整性检查:
  字形表中的字体ID    : ✓ 正常
  字形表中的作者ID    : ✓ 正常
  字形表中的书籍ID    : ✓ 正常
  图片表中的字形ID    : ✓ 正常
```

## 开发指南

### 添加新工具

1. 在 `tools` 目录下创建新的 Python 脚本
2. 遵循现有的代码风格和结构
3. 添加适当的文档字符串和注释
4. 在本 README 中添加工具说明
5. 如果需要，添加命令行参数支持

### 工具开发规范

- 使用项目的日志系统（`logger` 模块）
- 提供清晰的错误处理和用户反馈
- 支持命令行参数（使用 `argparse`）
- 包含详细的文档字符串
- 遵循 PEP 8 代码风格

### 依赖管理

工具脚本应该：
- 尽量使用标准库
- 如需外部依赖，确保已在 `requirements.txt` 中声明
- 正确处理项目路径和模块导入